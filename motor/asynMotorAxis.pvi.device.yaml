# yaml-language-server: $schema=file:///workspaces/pvi/schemas/pvi.device.schema.json

# a hand built PVI representation of the the motor record
label: asynMotorAxis
parent: asynPortDriver
children:
  - type: Group
    name: Motor
    layout:
      type: Grid
      labelled: true
    children:
      - type: SignalRW
        name: Position
        write_pv: $(P)$(M)
        write_widget:
          type: TextWrite
        read_pv: $(P)$(M).RBV
        read_widget:
          type: TextRead

      - type: SignalW
        name: Stop
        write_pv: $(P)$(M).STOP
        write_widget:
          type: ButtonPanel
          actions:
            Stop: "1"

      - type: SignalW
        name: TweakForward
        write_pv: $(P)$(M).TWF
        write_widget:
          type: ButtonPanel
          actions:
            TweakForward: "1"

      - type: SignalW
        name: TweakStep
        write_pv: $(P)$(M).TWV
        write_widget:
          type : TextWrite

      - type: SignalW
        name: TweakReverse
        write_pv: $(P)$(M).TWR
        write_widget:
          type: ButtonPanel
          actions:
            TweakReverse: "1"


  - type: Group
    name: Status
    layout:
      type: Grid
      labelled: true
    children:
      - type: SignalR
        name: Ready
        read_pv: $(P)$(M).DMOV
        read_widget:
          type: LED

      - type: SignalR
        name: Moving
        read_pv: $(P)$(M).MOVN
        read_widget:
          type: LED

      - type: SignalR
        name: Forward
        read_pv: $(P)$(M).TDIR
        read_widget:
          type: LED

      - type: SignalR
        name: Homed
        read_pv: $(P)$(M).MSTA
        read_widget:
          type: LED

      - type: SignalR
        name: HighLimit
        read_pv: $(P)$(M).HLS
        read_widget:
          type: LED

      - type: SignalR
        name: LowLimit
        read_pv: $(P)$(M).LLS
        read_widget:
          type: LED

      - type: SignalR
        name: SoftLimit
        read_pv: $(P)$(M).LVIO
        read_widget:
          type: LED

      - type: SignalR
        name: Missed
        read_pv: $(P)$(M).MISS
        read_widget:
          type: LED

  - type: Group
    name: Homing
    layout:
      type: Grid
      labelled: true
    children:
      - type: SignalW
        name: HomeForward
        write_pv: $(P)$(M).HOMF
        write_widget:
          type: ButtonPanel
          actions:
            HomeForward: "1"

      - type: SignalW
        name: HomeReverse
        write_pv: $(P)$(M).HOMR
        write_widget:
          type: ButtonPanel
          actions:
            HomeReverse: "1"

