 # yaml-language-server: $schema=https://github.com/epics-containers/ibek/releases/download/0.0.13/ibek.support.schema.json

module: asyn

defs:

- name: Vxi11
  description: |-
    Asyn vxi11 Port

  args:
  - type: str
    name: port
    description: IP address
  - type: bool
    name: noAutoConnect
    description: Set to stop autoconnect
  - type: int
    name: priority
    description: Priority
  - type: str
    name: simulation
    description: IP port to connect to if in simulation mode
  - type: id
    name: name
    description: Asyn Port name
  - type: int
    name: flags
    description: 'flags (lock devices : recover with IFC)'
    default: 0
  - type: float
    name: timeout
    description: default timeout
    default: '0.0'
  - type: str
    name: vxiName
    description: vxi name
    default: gpib0

  pre_init:
  - type: text
    value: |
      vxi11Configure("%s", "%s", %d, %s, "%s", %d, %d)

- name: AsynSerial
  description: |-
    Asyn Serial Port

  args:
  - type: str
    name: port
    description: Serial port tty name / IP address optionally followed by protocol
  - type: int
    name: baud
    description: Baud Rate
  - type: str
    name: parity
    description: Parity
  - type: str
    name: crtscts
    description: Set hardware flow control on
  - type: int
    name: stop
    description: Stop Bits
  - type: str
    name: disconnectOnReadTimeout
    description: Disconnect when a read times out
  - type: int
    name: bits
    description: Bits
  - type: id
    name: name
    description: Override name
  - type: str
    name: input_eos
    description: Input end of string (terminator)
  - type: str
    name: output_eos
    description: Output end of string (terminator)
  - type: int
    name: priority
    description: Priority
    default: 100
  - type: bool
    name: noAutoConnect
    description: Set to stop autoconnect
    default: false
  - type: bool
    name: noProcessEos
    description: Set to avoid processing end of string
    default: false
  - type: str
    name: simulation
    description: IP port to connect to if in simulation mode

  pre_init:
  - type: text
    value: |
      %sConfigure("%s", "%s", %d, %d, %d)
      asynSetOption("%s", 0, "%s", "%s")
      asynOctetSetInputEos("%s", 0, %s)
      asynOctetSetOutputEos("%s", 0, %s)

- name: AsynIP
  description: |-
    Asyn IP Port

  args:
  - type: str
    name: port
    description: Serial port tty name / IP address optionally followed by protocol
  - type: int
    name: baud
    description: Baud Rate
  - type: str
    name: parity
    description: Parity
  - type: str
    name: crtscts
    description: Set hardware flow control on
  - type: int
    name: stop
    description: Stop Bits
  - type: str
    name: disconnectOnReadTimeout
    description: Disconnect when a read times out
  - type: int
    name: bits
    description: Bits
  - type: id
    name: name
    description: Override name
  - type: str
    name: input_eos
    description: Input end of string (terminator)
  - type: str
    name: output_eos
    description: Output end of string (terminator)
  - type: int
    name: priority
    description: Priority
    default: 100
  - type: bool
    name: noAutoConnect
    description: Set to stop autoconnect
    default: false
  - type: bool
    name: noProcessEos
    description: Set to avoid processing end of string
    default: false
  - type: str
    name: simulation
    description: IP port to connect to if in simulation mode

  pre_init:
  - type: text
    value: |
      %sConfigure("%s", "%s", %d, %d, %d)
      asynSetOption("%s", 0, "%s", "%s")
      asynOctetSetInputEos("%s", 0, %s)
      asynOctetSetOutputEos("%s", 0, %s)

- name: AsynIPServer
  description: |-
    Asyn IP Server Port

  args:
  - type: str
    name: port
    description: Serial port tty name / IP address optionally followed by protocol
  - type: int
    name: baud
    description: Baud Rate
  - type: str
    name: parity
    description: Parity
  - type: str
    name: crtscts
    description: Set hardware flow control on
  - type: int
    name: stop
    description: Stop Bits
  - type: str
    name: disconnectOnReadTimeout
    description: Disconnect when a read times out
  - type: int
    name: bits
    description: Bits
  - type: id
    name: name
    description: Override name
  - type: str
    name: input_eos
    description: Input end of string (terminator)
  - type: str
    name: output_eos
    description: Output end of string (terminator)
  - type: int
    name: priority
    description: Priority
    default: 100
  - type: bool
    name: noAutoConnect
    description: Set to stop autoconnect
    default: false
  - type: bool
    name: noProcessEos
    description: Set to avoid processing end of string
    default: false
  - type: str
    name: simulation
    description: IP port to connect to if in simulation mode

  pre_init:
  - type: text
    value: |
      %sConfigure("%s", "%s", %d, %d, %d)
      asynSetOption("%s", 0, "%s", "%s")
      asynOctetSetInputEos("%s", 0, %s)
      asynOctetSetOutputEos("%s", 0, %s)
