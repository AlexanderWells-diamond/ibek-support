# yaml-language-server: $schema=http://github.com/epics-containers/ibek/releases/download/0.9/ibek.defs.schema.json

module: ipac

defs:
  - name: Hy8002
    args:
      - type: int
        name: slot
        description: Slot number

      - type: int
        name: intLevel
        description: Interrupt level
        default: 2

      # we need a unique interrupt that is shared by all Hy8002 cards (I think)
      # not sure how to generate this in ibek
      - type: int
        name: swapint
        description: Swap interrupt
        # JUST FOR TESTING NOT OK to use this value
        default: 192

      - type: str
        name: IPACid
        description: IPAC identifier
        default: "IPAC{{ slot }}"

    script:
      - '{{ IPACid }} = ipacEXTAddCarrier(&EXTHy8002,, "{{ slot }} {{ intLevel }} {{ swapint }}")'
