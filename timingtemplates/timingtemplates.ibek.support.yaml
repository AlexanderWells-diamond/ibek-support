# yaml-language-server: $schema=../_global/ibek.defs.schema.json

module: timingTemplates

defs:
  - name: defaultEVR
    args:
      - type: id
        name: device
        description: The device PV prefix

      - type: object
        name: EventReceiver
        description: reference to EventReceiverPMC entry

      - type: str
        name: er
        description: Event Receiver record suffix
        default: "SET-ER"

    databases:
      - file: defaultEVR.template
        define_args: card = {{ EventReceiver.card_id }}
        include_args: [device, er]

  - name: evr_alive
    args:
      - type: object
        name: defaultEVR
        description: reference to defaultEVR entry

    databases:
      - file: evr_alive.template
        define_args: |
          device={{ "" }}
          SYSTEM={{ defaultEVR.device }}

  - name: generalTime
    args:
      - type: id
        name: device
        description: device name

      - type: str
        name: gt
        description: generalTime PV Prefix
        default: "GT:"

      - type: str
        name: scan
        description: scan rate
        default: 10 second

    databases:
      - file: generalTime.template
        include_args: [device, gt, scan]
